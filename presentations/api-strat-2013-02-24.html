<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

    <!-- this is all reveal.js boiler plate.  Title, description, author, and theme have been changed. -->
    <title>Rdio API - API Strategy Conference 2013</title>

		<meta name="description" content="Rdio API presentation for API Strategy Conference, 2013">
		<meta name="author" content="R. Kevin Nelson">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="reveal/css/reveal.min.css">
		<link rel="stylesheet" href="reveal/css/theme/rdio.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="reveal/lib/css/github.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="reveal/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>

		<![endif]-->

    <!-- Include the Rdio JS API.  If you're forking this project, you should use your own client_id here -->
    <script src="http://www.rdio.com/api/api.js?helper=helper.html&client_id=FJsI8SigdAUhXEjdsXFa6Q"></script>
	</head>

	<body>

		<div class="reveal">

      <header></header>

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
        
        <!-- Title Slide -->
        <section data-state="title-slide">
          <div class="left">
          </div>
          <div class="right">
            <h1>Rdio API</h1>
            <h4>API Strategy Conference, 2013</h4>
            <h4>The Future of Music APIs</h4>
            <h3>R. Kevin Nelson</h3>
            <h3><img src="img/twitter-bird-light-bgs.png" /><a href="http://twitter.com/rknLA">@rknLA</a></h3>
            <h3><img src="img/rdio-o.png" /><a href="http://rd.io/people/rknLA">http://rd.io/people/rknLA</a></h3>
          </div>
          
          <aside class="notes">
            <ul>
              <li>Hi, my name is Kevin Nelson, and I'm a Developer Advocate and Engineer at Rdio</li>
              <li><strong>How many of you know what Rdio is?</strong></li>
              <li><strong>How many of you use Rdio?</strong></li>
              <li><strong>How many of you have used our API?</strong></li>
            </ul>
          </aside>
        </section>

        <!-- Overview -->
        <section data-state="chapter">
          <h1>Overview</h1>
        </section>

        <section data-title="About Rdio">
          <ul>
            <li>We stream music from the internet.
            <li>We sync music to your phone.</li>
            <li>We don't have advertisements.</li>
            <li>We have (almost) all the songs.</li>
            <li><em>We have an API</em></li>
          </ul>
          <br />
          <br />
          <h4><a href="http://www.rdio.com">http://www.rdio.com</a></h4>
          <h4><a href="http://developer.rdio.com">http://developer.rdio.com</a></h4>

          <aside class="notes">
            Ok, well, for those of you unfamiliar, this is the overview
            All of this info is on our website.
            We have a features page.  It lists our features.
            As you might have guessed, we also have an API.
          </aside>
        </section>

        <section>
          <section data-title="Current API Offerings">
            <p>"The Basics"</p>
            <ul>
              <li>Music streaming</li>
              <li>Web Services (metadata)</li>
            </ul>

            <aside class="notes">
              Our API lets developers access most of our features with ease.
              <br />
              We support integrating playback, manipulating playlists and collections, and accessing our social graph.
              <br />
            </aside>
          </section>

          <section data-title="Platforms">
            <ul>
              <li>Web (server-side)</li>
              <li>Mobile (iOS, Android)</li>
            </ul>

            <aside class="notes">
              Today these sound like pretty basic features, but compare today with where the music tech world was 4 years ago.
              <br />
              There was nothing.
              If you wanted to build an app around music your user likes to listen to, you had to bundle it and risk mismatched taste.
              <br />
              That landscape is entirely different now.
            </aside>
          </section>

          <section data-title="The Tech">
            <ul>
              <li>OAuth 1.0a on top of Mashery</li>
              <li>RPC-style API</li>
              <li>Flash streaming</li>
              <li class="fragment">google: hacker news rdio rest</li>
            </ul>

            <aside class="notes">
              So... you wanna use us in your app.
              This is the sort of stuff you'll be looking at.
              <br />
              It's fairly straight forward.
              We provide libraries that abstract the OAuth stuff for most programming languages.
              <br />
              JSON (or XML if you're feeling masochistic)
              <br />
              Important things to note: You'll need a server side component
              <br />
              And we're not REST.
              There was a long discussion on hacker news.  It's easy to find.
            </aside>
          </section>

          <section data-title="The Quirks">
            <ul>
              <li>30 second samples for non-subscribers</li>
              <li>Only monetizable through our affiliate program</li>
            </ul>

            <aside class="notes">
              Areas for improvement.
              <br />
              Unsubscribed users get the short end of the stick.
              Not gonna change any time soon.
              <br />
              But signing up is easy (6 months free limited)
              <br />
              Our current monetization scheme is an affiliate program.
              Current TOS prohibits commercial use.
              Working on bettering it.
            </aside>
          </section>
        </section>

        <!-- Let's talk about the future -->
        <section data-state="chapter">
          <h1>Making Things Better</h1>
          <aside class="notes">
            This is a panel on the future of music APIs,
            <br />
            So what are we going to be doing in the future?
            <br />
            How?
          </aside>
        </section>

        <section data-title="Steal from Product Design">
          <h3>User Experience (UX)</h3>
          <h3 class="fragment">Developer Experience (DX)</h3>
          <aside class="notes">
            Focus on User Experience and core product.
            <br />
            Except in this case, your user is a developer.
            <br />
            Focus on developer experience.
            <br />
            How can we make developer experience better?
          </aside>
        </section>

        <section>
          <section data-title="Making Things Better">
          <h2>Decrease ramp-up times</h2>

          <aside class="notes">
          Two types of ramp-up:
          Both times need to be decreased
          <br />
          Motivation vs. Time - developers are lazy &amp; easily discouraged.
          <br />
          Decreasing ramp-up time increases the likelihood that they'll actually deploy something.
          </aside>
          </section>

          <section data-title="Decrease ramp-up times">
          <h3>Time to First Blink</h3>

          <aside class="notes">
          Two types of ramp-up:
          Both times need to be decreased
          <br />
          Motivation vs. Time - developers are lazy &amp; easily discouraged.
          <br />
          Decreasing ramp-up time increases the likelihood that they'll actually deploy something.
          </aside>
          </section>

          <section data-title="Decrease ramp-up times">
          <h3>XP required to Level Up</h3>

          <aside class="notes">
          Two types of ramp-up:
          Both times need to be decreased
          <br />
          Motivation vs. Time - developers are lazy &amp; easily discouraged.
          <br />
          Decreasing ramp-up time increases the likelihood that they'll actually deploy something.
          </aside>
          </section>
        </section>

        <section data-title="Making Things Better">
          <h2>Provide building blocks</h2>

          <aside class="notes">
            Do as much work as you possibly can for the developer.
            <br />
            The more work you do for them, the less work they'll have to do.
            <br />
            Doing this also has the pleasant effect of decreasing ramp-up time.
          </aside>
        </section>

        <section data-title="Do the obvious things">
          <ul>
            <li>Keep it Simple</li>
            <li>Documentation</li>
            <li>Tutorials</li>
            <li>Support</li>
          </ul>
          <aside class="notes">
            REST, Hypermedia, and OAuth are not simple.
            <br />
            Keep docs up to date and accurate.
            They can _always_ be better.
            <br />
            Dogfood your API.  Blog about it.  Open source the project. Instant tutorial!
            <br />
            Real time support.  IRC, Twitter, email, Forums.
            <p>Those premises are all fine and good. What're we doing to deliver?</p>
          </aside>
        </section>

        <!-- JS API -->
        <section>
          <section data-title="Making Things Better">
            <h2>OAuth 2.0</h2>

            <aside class="notes">
              <p>One of our big focuses right now is moving to OAuth2</p>
              <p>Ok. Technology. Pedantic. Why should you care?</p>
              <p>Let's look at the alternative</p>
            </aside>
          </section>

          <section data-title="OAuth 1.0a">
            <ul>
              <li>Request Signatures</li>
              <li>All-or-Nothing Permissions</li>
              <li>Server-Side</li>
            </ul>

            <aside class="notes">
              <p>OAuth 1.0 is complicated for the developer.</p>
              <p>You need to sign requests</p>
              <p>Permission granularity is blunt and broad. Allowed or not.</p>
              <p>And your app must live on a server somewhere.</p>
            </aside>
          </section>

          <section data-title="OAuth 2">
            <ul>
              <li>Multiple authentication flows</li>
              <li>Permission granularity</li>
              <li>Client-side support</li>
            </ul>

            <aside class="notes">
              <p>OAuth 2 is much more straightforward</p>
              <p>No more request signing,</p>
              <p>Granular permissions (via token scope)</p>
              <p>And using the implicit grant, an app can be entirely client-side</p>
              <p>Enough about OAuth2, let's talk about Javascript</p>
            </aside>
          </section>
        </section>

        <section data-state="chapter">
          <h1>Let's talk about JavaScript</h1>

          <aside class="notes">
            <p>Because moving lets us have client-side apps!</p>
            <p>Host apps for free using github pages</p>
          </aside>
        </section>

        <section data-title="Using the (beta) JS API">
          <p>your_site.html</p>
          <pre><code>
&lt;!-- Include our API on your page --&gt;
&lt;script src="http://www.rdio.com/api/api.js?helper=helper.html
&amp;client_id=YOUR_CLIENT_ID"&gt;&lt;/script&gt;
          </code></pre>

          <aside class="notes">
          <p>You only need to do two things to integrate our JS API into
          your website, and they're both dead simple.</p>
          <p>First, include our javacript file.</p>
          <p>It's one line of code.  You'll probably copy and paste it,
          and put in your own client_id.</p>
          </aside>
        </section>

        <section data-title="The Helper file">
        <p>helper.html</p>
          <pre><code>
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8" /&gt;
  &lt;title&gt;Rdio JS API helper&lt;/title&gt;
  &lt;script type="text/javascript" src="https://www.rdio.com/media/fresh/now/api-helper.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
          </code></pre>
          <aside class="notes">
            <p>Second, you need to add a helper to the same server as your main
            page.  The helper doesn't need anything special.</p>
            <p>You can use the same helper for multiple apps.</p>
          </aside>
        </section>

        <section data-title="R.ready()">
          <pre><code>
&lt;script type="text/javascript"&gt;
  R.ready(function() {
    console.log("I get printed when Rdio's ready");
  });
&lt;/script&gt;
          </code></pre>

          <aside class="notes">
          <p>With that, you can start making API calls.</p>
          <p>We even provide a .ready function in the vein of jquery
          so that you don't have to worry about calling functions
          that haven't been defined yet.</p>
          </aside>
        </section>

        <section id="slide-some-examples" data-title="Some (beta) JS API Examples">
          <div class="examples-buttons">
            <ul>
              <li class="btn" id="js-example-charts-btn">Top Charts</li>
              <li class="btn" id="js-example-auth-btn">Authentication</li>
              <li class="btn" id="js-example-events-btn">Events</li>
              <li class="btn" id="js-example-search-btn">Search</li>
            </ul>
          </div>
          <pre><code id="js-example-code" contenteditable>
          </code></pre>
          <pre><code id="js-example-output" contenteditable></code></pre>

          <aside class="notes">
          <p>Let's look at some examples.</p>
          <p>The contents of this text field get run through eval when I hit control+enter</p>
          <p>All you need to authenticate is to wrap your call in an authenticate!</p>
          </aside>
        </section>

        <section data-title="(beta) JS API">
          <h2>In the Wild...</h2>
          <ul>
            <li><a href="http://resp.in/queue/" target="_blank">Respin</a></li>
            <li><a href="http://eavesdrop.io/" target="_blank">Eavesdrop.io</a></li>
            <li><a href="http://letsfathom.com/">Fathom</a></li>
          </ul>
        </section>

        <section data-state="chapter">
          <h1>Any questions?</h1>
        </section>

			</div>

      <footer>
        &copy; 2013 Rdio, Inc.  All rights reserved.
      </footer>

		</div>


		<script src="reveal/lib/js/head.min.js"></script>
		<script src="reveal/js/reveal.min.js"></script>


    <!-- JS API Example scripts -->
    <script id="js-charts-example-code" type="text/x-js-template">R.ready(function() {
  R.request({
    method: 'getTopCharts',
    content: { type: 'tracks', count: 1 },
    success: function(response) {
      var name = response.result[0].name;
      var artist = response.result[0].artist;
      console.log('Now Playing: ' + name  + ' by ' + artist);
      R.player.play({source: response.result[0].key});
    }
  });
});</script>

    <script id="js-auth-example-code" type="text/x-js-template">R.ready(function() {
  R.authenticate(function(success) {
    if (success) {
      console.log('We logged in as ' + R.currentUser.get('vanityName'));
      R.request({
        method: 'getTopCharts',
        content: { type: 'tracks', count: 1 },
        success: function(response) {
          var name = response.result[0].name;
          var artist = response.result[0].artist;
          console.log('Now Playing: ' + name  + ' by ' + artist);
          R.player.play({source: response.result[0].key});
        }
      });
    }
  });
});</script>

    <script id="js-search-example-code" type="text/x-js-template">R.ready(function() {
  R.request({
    method: 'search',
    content: { query: 'you forgot it in people', types: 'Album' },
    success: function(response) {
      var result = response.result.results[0];
      var name = result.name;
      var artist = result.artist;
      console.log('Now Playing: ' + name  + ' by ' + artist);
      R.player.play({source: result.key});
    }
  });
});</script>

    <script id="js-events-example-code" type="text/x-js-template">R.ready(function() {
  R.player.on('change:playingTrack', function(val) {
    var track = val.get('name');
    var artist = val.get('artist');
    var album = val.get('album');
    console.log('Now Playing: "' + track + '" - ' + artist + ' (' + album + ')');
  });
  console.log("Ok. Now we're listening to events!");
});</script>


		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,
				rollingLinks: false,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'reveal/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'reveal/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'reveal/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'reveal/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

      // Slide titles
      var showSlideHeader = function(current) {
        var headers = document.getElementsByTagName('header') || [];
        var header = headers[0];

        if (header) {
          var title = current.dataset.title;
          if (title !== undefined) {
            header.innerHTML = title;
            header.style.display = null;
          } else {
            header.style.display = 'none';
          }
        }
      };
      Reveal.addEventListener('ready', function(e) {
        showSlideHeader(e.currentSlide);
      });
      Reveal.addEventListener('slidechanged', function(e) {
        showSlideHeader(e.currentSlide);
      });


      /* Set up charts example on deck load.  When I didn't do this, there was a weird layout
         glitch that would happen when that slide was shown. This little bit fixes it. */
      Reveal.addEventListener('ready', function(e) {
        var codeElement = document.getElementById('js-example-code');
        var chartsExample = document.getElementById('js-charts-example-code').innerHTML;
        codeElement.innerHTML = chartsExample;
      });


      /* Custom Rdio listener for JS API Examples */
      /* This is the bulk of the example runner.  Hopefully it's not too hard to understand. */
      Reveal.addEventListener('slidechanged', (function() {
        /* note that this is a closure, so all of this stuff gets executed when the event listener gets added, not when the event occurs */

        /* code runner */
        var codeElement = document.getElementById('js-example-code');

        var runExample = function() {
          var code = codeElement.textContent || codeElement.innerText;
          eval(code);
          hljs.highlightBlock(codeElement);
        };

        codeElement.onkeydown = function(e) {
          if (e.ctrlKey && e.keyCode == 13) {
            //ctrl enter
            runExample();
            return false;
          };
        };


        /* buttons to show new examples */
        var chartsExample = document.getElementById('js-charts-example-code').innerHTML;
        var authExample = document.getElementById('js-auth-example-code').innerHTML;
        var searchExample = document.getElementById('js-search-example-code').innerHTML;
        var eventsExample = document.getElementById('js-events-example-code').innerHTML;

        document.getElementById('js-example-charts-btn').onclick = function() {
          codeElement.innerHTML = chartsExample;
          hljs.highlightBlock(codeElement);
        };
        document.getElementById('js-example-auth-btn').onclick = function() {
          codeElement.innerHTML = authExample;
          hljs.highlightBlock(codeElement);
        };
        document.getElementById('js-example-events-btn').onclick = function() {
          codeElement.innerHTML = eventsExample;
          hljs.highlightBlock(codeElement);
        };
        document.getElementById('js-example-search-btn').onclick = function() {
          codeElement.innerHTML = searchExample;
          hljs.highlightBlock(codeElement);
        };


        /* reroute console to a div */
        var originalConsole = window.console;

        var logEl = document.getElementById('js-example-output');
        var divConsole = {
          log: function() {
            var args = Array.prototype.slice.call(arguments);
            logEl.innerHTML = args.join('\n');
          },
          error: function() {
            var args = Array.prototype.slice.call(arguments);
            logEl.innerHTML = "Error: ";
            logEl.innerHTML += args.join('\n');
          }
        };

        var eventHandler = function(e) { 
          /* this is the actual function that gets run on the slide-changed event. it just loads up the default example and swaps the console. */
          if (e.currentSlide.id == 'slide-some-examples') {
            codeElement.innerHTML = chartsExample;
            hljs.highlightBlock(codeElement);
            window.console = divConsole;
          } else {
            /* redundant in most cases, but cheap, and a decent enough hammer */
            window.console = originalConsole;
          }
        };
        return eventHandler;
      })());
		</script>

	</body>
</html>
